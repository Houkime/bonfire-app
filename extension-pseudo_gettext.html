<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.4">
    <meta name="project" content="bonfire v0.3.3-classic-beta.1">

    <title>PseudoGettext — bonfire v0.3.3-classic-beta.1</title>
    <link rel="stylesheet" href="dist/elixir-b6f1ed5df9b1d42a7309.css" />

    <script src="dist/sidebar_items-06a78ed9d8.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-bd1cb213813bf4825aa2.js"></script>


  </head>
  <body data-type="extras">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">


<section class="sidebar">
  <button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
    <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
  </button>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="https://bonfirenetworks.org">
        <img src="assets/logo.png" alt="bonfire" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="https://bonfirenetworks.org" class="sidebar-projectName" translate="no">
bonfire
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.3.3-classic-beta.1
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


        <li><a id="tasks-list-link" href="#full-list"><span translate="no">Mix</span> Tasks</a></li>

    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/bonfire-networks/pseudo_gettext/blob/main/README.md#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span>PseudoGettext</span>
</h1>

<p>A Gettext-compatible backend that adds support for
<a href="https://en.wikipedia.org/wiki/Pseudolocalization">pseudolocalization</a>.
Pseudolocalization can help you catch localization bugs earlier in the development process.</p><h2 id="installation" class="section-heading">
  <a href="#installation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">installation</p>
  </a>
  Installation
</h2>
<p>This package is <a href="https://hex.pm/docs/publish">available in Hex</a>
It can be installed by adding <code class="inline">pseudo_gettext</code> to your list of dependencies
in <code class="inline">mix.exs</code>:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">deps</span><span class="w"> </span><span class="k" data-group-id="8477986823-1">do</span><span class="w">
  </span><span class="p" data-group-id="8477986823-2">[</span><span class="w">
    </span><span class="p" data-group-id="8477986823-3">{</span><span class="ss">:pseudo_gettext</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 0.1.0&quot;</span><span class="p" data-group-id="8477986823-3">}</span><span class="w">
  </span><span class="p" data-group-id="8477986823-2">]</span><span class="w">
</span><span class="k" data-group-id="8477986823-1">end</span></code></pre><p>Documentation is generated with <a href="https://github.com/elixir-lang/ex_doc">ExDoc</a>
and published on <a href="https://hexdocs.pm">HexDocs</a>.
The complete documentation can be found at <a href="https://hexdocs.pm/pseudo_gettext">https://hexdocs.pm/pseudo_gettext</a>.</p><h2 id="why-pseudolocalization" class="section-heading">
  <a href="#why-pseudolocalization" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">why-pseudolocalization</p>
  </a>
  Why Pseudolocalization?
</h2>
<p>From <a href="https://en.wikipedia.org/wiki/Pseudolocalization">Wikipedia</a>:</p><blockquote><p>Pseudolocalization (or pseudo-localization) is a software testing method
used for testing internationalization aspects of software.
Instead of translating the text of the software into a foreign language,
as in the process of localization, the textual elements of an application
are replaced with an altered version of the original language.</p><p>These specific alterations make the original words appear readable,
but include the most problematic characteristics of the world's languages:
varying length of text or characters, language direction,
fit into the interface and so on.</p></blockquote><p>Pseudolocalization usually does the following:</p><ul><li><p>Replace each latin character with a slightly modified version,
which is still legible (for example, <code class="inline">m → ɱ</code>, <code class="inline">j → ǰ</code>). This allows
the programmer and users to visually distinguish text that has been
internationalized (i.e. wrapped in a <code class="inline">gettext</code> call) from text that
hasn't been internationalized. The fact that we convert characters
into characters that are visually similar means that the text remains
readable.</p></li><li><p>Replace arabic numerals (i.e. latin digits) as we did above.
The goal is the same: to have arabic numerals that are visually
distinct but understandable.</p></li><li><p>Add extra tilde (<code class="inline">~</code>) characters to words to make them ~35% longer.
This allows us to identify UI elements that are too inflexible for
languages that may take up more space than English.
As a rule of thumb, one should assume that foreign language strings
are 35% longer in other languages.</p></li><li><p>Surround the string with <code class="inline">&quot;⟪&quot;</code> and <code class="inline">&quot;⟫&quot;</code> so that you can idenify messages
that are to big for the containing element (those messages will be clipped
and the text won't be surrounded by <code class="inline">&quot;⟪&quot;</code> and <code class="inline">&quot;⟫&quot;</code> on both sides).</p></li><li><p>Other characters (non-latin characters, punctuation characters, etc.)
are not touched by the localization process.</p></li></ul><p>This can (and should!) be used in development to identify internationalization
problems before they hit production.</p><h2 id="usage" class="section-heading">
  <a href="#usage" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">usage</p>
  </a>
  Usage
</h2>
<p>This is a drop-in replacement for <a href="https://hexdocs.pm/gettext/0.19.1/Gettext.html"><code class="inline">Gettext</code></a>.
You can just replace:</p><pre><code class="makeup elixir" translate="no"><span class="kn">use</span><span class="w"> </span><span class="nc">Gettext</span><span class="p">,</span><span class="w"> </span><span class="ss">otp_app</span><span class="p">:</span><span class="w"> </span><span class="ss">:my_app</span></code></pre><p>by</p><pre><code class="makeup elixir" translate="no"><span class="kn">use</span><span class="w"> </span><span class="nc">PseudoGettext</span><span class="p">,</span><span class="w"> </span><span class="ss">otp_app</span><span class="p">:</span><span class="w"> </span><span class="ss">:my_app</span></code></pre><p>To activate pseudolocalization of plain text, you need to set
the gettext locale to <code class="inline">&quot;en-pseudo_text&quot;</code> with <code class="inline">Gettext.set_locale(&quot;en_pseudo_text&quot;)</code>.
To activate pseudolocalization of HTML (which respects HTML tags and attributes),
you need to set the gettext locale to <code class="inline">&quot;en-pseudo_html&quot;</code> with <code class="inline">Gettext.set_locale(&quot;en_pseudo_html&quot;)</code>.</p><p>These locales are hardcoded and can't be easily extended.
Extending these locales or adding config options is on the (tenuous) roadmap.</p><p>IF you want to set the locale globally for your application (which is what you often want in development),
you can use the <code class="inline">PseudoGettext.set_global_locale/1</code> function.
If you start your application with IEx, you can simply use <code class="inline">PseudoGettext.set_global_locale(&quot;en-pseudo_html&quot;)</code>.
Another approach is to set the global locale as a config option:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># config/dev.exs</span><span class="w">
</span><span class="n">config</span><span class="w"> </span><span class="ss">:pseudo_gettext</span><span class="p">,</span><span class="w"> </span><span class="ss">:locale</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;en-pseudo_html&quot;</span></code></pre><p>This is actually a very good option in development, becuase it allows you to detect
internationalization issues earlier.</p><h2 id="demo" class="section-heading">
  <a href="#demo" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">demo</p>
  </a>
  Demo
</h2>
<p>In a normal Phoenix application, there is usually a <code class="inline">MyAppWeb.Gettext</code> module
such as this one:</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">CrabsWeb.Gettext</span><span class="w"> </span><span class="k" data-group-id="1095246565-1">do</span><span class="w">
  </span><span class="na">@moduledoc</span><span class="w"> </span><span class="s">&quot;&quot;&quot;
  A module providing Internationalization with a gettext-based API.
  &quot;&quot;&quot;</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Gettext</span><span class="p">,</span><span class="w"> </span><span class="ss">otp_app</span><span class="p">:</span><span class="w"> </span><span class="ss">:crabs</span><span class="w">
</span><span class="k" data-group-id="1095246565-1">end</span></code></pre><p>We can add support for pseudolocalization by replacing <code class="inline">use Gettext, ...</code>
by <code class="inline">use PseudoGettext, ...</code>:</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">CrabsWeb.Gettext</span><span class="w"> </span><span class="k" data-group-id="4908888706-1">do</span><span class="w">
  </span><span class="na">@moduledoc</span><span class="w"> </span><span class="s">&quot;&quot;&quot;
  A module providing Internationalization with a gettext-based API.
  &quot;&quot;&quot;</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">PseudoGettext</span><span class="p">,</span><span class="w"> </span><span class="ss">otp_app</span><span class="p">:</span><span class="w"> </span><span class="ss">:crabs</span><span class="w">
</span><span class="k" data-group-id="4908888706-1">end</span></code></pre><p>The rest of the application requires no changes.</p><p>Say we have a user registration form the application.
It could look like this:</p><p><img src="assets/pseudo-gettext-registration-form-initial.png" alt="User registration form before psudolocalization"/></p><p>By starting the application with the config option above (<code class="inline">config :pseudo_gettext, :locale, &quot;en-pseudo_html&quot;</code>)
or using the IEx console (<code class="inline">PseudoGettext.set_global_locale(&quot;en-pseudo_html&quot;)</code>) we can activate
pseudolocalization. The login form should now look like this:</p><p><img src="assets/pseudo-gettext-registration-form-partially-localized.png" alt="User registration form partially localized"/></p><p>As you can see, most user-visible text has been replaced by unicode symbols
similar to latin letters. The text remains quite readable throughout.
You can see that on the top left corner, the application name is not properly
internationalized.</p><p>When we inspect the source code, we can see the reason:</p><pre><code class="makeup heex" translate="no"><span class="c">&lt;%# root.html.heex %&gt;</span><span class="w">
</span><span class="s">...</span><span class="w">
  </span><span class="p" data-group-id="8706744220-out-1">&lt;</span><span class="k">a</span><span class="w"> </span><span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-brand&quot;</span><span class="w"> </span><span class="na">href</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p" data-group-id="8706744220-out-1">&gt;</span><span class="s">CrabsWeb</span><span class="p" data-group-id="8706744220-out-2">&lt;/</span><span class="k">a</span><span class="p" data-group-id="8706744220-out-2">&gt;</span><span class="w">
</span><span class="s">...</span></code></pre><p>The name of the application is a static string in the <code class="inline">.heex</code> template,
which is not internationalized. To properly internationalize the application name,
you must wrapp it in <code class="inline">(d)gettext</code>:</p><pre><code class="makeup heex" translate="no"><span class="c">&lt;%# root.html.heex %&gt;</span><span class="w">
</span><span class="s">...</span><span class="w">
  </span><span class="p" data-group-id="5927295436-out-1">&lt;</span><span class="k">a</span><span class="w"> </span><span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-brand&quot;</span><span class="w"> </span><span class="na">href</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p" data-group-id="5927295436-out-1">&gt;</span><span class="p" data-group-id="5927295436-1">&lt;%=</span><span class="w"> </span><span class="n">dgettext</span><span class="p" data-group-id="5927295436-ex-1">(</span><span class="s">&quot;accounts&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;CrabsWeb&quot;</span><span class="p" data-group-id="5927295436-ex-1">)</span><span class="w"> </span><span class="p" data-group-id="5927295436-1">%&gt;</span><span class="p" data-group-id="5927295436-out-2">&lt;/</span><span class="k">a</span><span class="p" data-group-id="5927295436-out-2">&gt;</span><span class="w">
</span><span class="s">...</span></code></pre><p>If you reload the page, the app's branding will be properly internationalized:</p><p><img src="assets/pseudo-gettext-registration-form-fully-localized.png" alt="User registration form fully localized"/></p><p>By setting the global locale to <code class="inline">nil</code> (i.e. <code class="inline">PseudoGettext.set_global_locale(nil)</code>)
you can deactivate pseudolocalization and revert to the default locale:</p><p><img src="assets/pseudo-gettext-registration-form-initial.png" alt="User registration form before psudolocalization"/></p><p>This short demo illustrates the workflow one could follow to ensure the application
is properly internationaluzed throughout development. If one develops with pseudolocalization
active most of the time, these small errors are easy to find and correct.</p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="extension-surface_boxicon.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Boxicon
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="extension-zest.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Zest
        </span>
      </a>

  </div>
</div>

      <footer class="footer">

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.4) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
